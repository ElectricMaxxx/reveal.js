<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>RESTing on HTTP</title>

		<meta name="description" content="">
		<meta name="author" content="Maximilian Berghoff">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/moon.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h1>RESTing on HTTP</h1>
					<h6>Developer/Web Week - 17.06.2015</h6>
				</section>

				<section>
					<h1>Who am i?</h1>
					<ul>
						<li class="fragment">Maximilian Berghoff</li>
						<li class="fragment">
							<a href="https://twitter.com/ElectricMaxxx">
								@ElectricMaxxx
							</a>
						</li>
						<li class="fragment">
							<a href="mailto:Maximilian.Berghoff@mayflower.de">
								Maximilian.Berghoff@mayflower.de
							</a>
						</li>
                        <li class="fragment">
                            Mayflower GmbH (Würzburg)
                        </li>
					</ul>
					<aside class="notes">
                        Wer bin ich überhaupt? <br>
                        Ich komme aus der PHP Ecke. Wer noch? <br />
                        KLICK<br>
                        Ich bin passionierter Symfony Dev und ein Teil des Core Teams,
                        welches das Symfony CMF entwickelt - ein sog. Content Management Framework.<br />
                        KLICK <br>
                        Mein Twitter Handle sollte aus dem Abstract bekannt sein - ansonsten folgen!<br>
                        KLICK <br>
                        Mein Mail-addresse steht für Fragen offen <br>
                        Wie die Domain schon verrät ... <br>
                        KLICK <br>
                        Mein Arbeitgeber ist die Mayflower GmbH. <br>
                        Ich arbeite also nur einen Katzensprung von hier entfernt - in Würzburg. <br>
					</aside>
				</section>

				<section>
					<h1>About?</h1>
					<aside class="notes">
						Worum soll es heute gehen? <br />
						Was habt erwartet Ihr? <br>
                        ... Abwarten ...Wortmeldungen ? Sonst ...<br>
                        Dann stell ich hier mal folgende These in den Raum. <br>
                        <br>
                        KLICK
					</aside>
				</section>

				<section>
					<h1>REST = HTTP?</h1>
					<aside class="notes">
                        Ist das so?<br>
                        <br>
                        Um das zu klären, gebe ich noch einmal ein kurze Einführung in die Welt von HTTP für Webentwickler. <br>
                        <br>
                        KLICK
					</aside>
				</section>

				<section>
					<h1>HTTP</h1>
					<aside class="notes">
                        HTTP, so kennen wir es als Entwickler. Es ist das sog. HyperText Transfer Protocol.<br>
                        <br>
                        Es hat etwas von der Konversation mit dem Guten alten Brief: <br>
                        Ich sende eine Information an eine bestimmte Addresse und erhalte eine Antwort. Sowahr der Empfänger
                        das will :-). Jeder Brief enthält Meta-Informationen für den Versand auf dem Umschlag - Adresse, manchal größe und Gewicht.
                        Diese entsprechen den Headern bei einem HTTP-Request oder -Response. Dazu enthält jeder Brief Inhalt
                         - der sog. Body. <br>
                        D.h. es geht um einen Request an einen Server und desen Response. <br>
                        Dann schauen wir uns einmal einen solchen Request an: <br>
                        KLICK
                    </aside>
				</section>

				<section>
					<pre>
						<code data-trim>
GET /info HTTP/1.1
Host: www.expamle.dev
Content-Type: text/html
						</code>
					</pre>
                    <p>Header Request</p>
					<aside class="notes">
                        Was sehen wir hier?<br>
                        Den Header eines HTTP request. <br>
                        Ja das steht da. Aber was genau? <br>
                        Im Grunde könnte das die Anfrage eines Gewöhnlichen Browsers sein.<br>
                        Denn es geht darum zu zeigen, dass die Resource "info" auf unter der URL www.exampl.dev/info angefragt wird.<br>
                        Was passiert dann? <br>
                        Die Antwort des Servers<br>
                        KLICK
					</aside>
				</section>

				<section>
					<pre>
						<code data-trim>
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head lang=&quot;en&quot;&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Information&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;h1&gt;Information about this page&lt;/h1&gt;
	&lt;p&gt;Here you will get your information&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
						</code>
					</pre>
                    <p>Content der Response</p>
					<aside class="notes">
                        Diese Antwort entspricht dem, was unser Browser als HTML Content erhalten würde.
                        Er könnte es dann sicher schön darstellen.<br>
                        Aber was uns mehr interessiert:<br>
                        ist der HEADER<br>
                        <br>
                        KLICK
					</aside>
				</section>

				<section>
					<pre>
						<code>
HTTP/1.1 200 OK
Content-Type: text/html; charset=UTF-8
..
						</code>
					</pre>
                    <p>Header Response</p>
					<aside class="notes">
                        Das sieht gut aus. Auf anhieb können wir erkennen, das der Request erfolgreich beantwortet wurde. <br>
                        Gleich auf zwei Arten steht es da.<br>
                        Der Statuscode als numerischer wert.<br>
                        Und eine Phrase, hier OK. <br>
                        Dazu können noch unzählige andere Informationen kommen, die ich jetzt hier mal weg gelassen habe: <br>
                        - Content-Type <br>
                        - Content-Location <br>
                        - Caching Headers <br>
                        - und und und <br>
                        <br>
                        Nun zu einigen Informationen im einzelnen ... <br>
                        KLICK
					</aside>
				</section>

                <section>
                    <h1>Status Codes</h1>
                    <ul>
                        <li class="fragment">1XX - Bearbeitung dauert an (Intermediate)</li>
                        <li class="fragment"><span class="">2XX - Anfrage Erfolgreich</span></li>
                        <li class="fragment"><span class="">3XX - Umleitungen</span></li>
                        <li class="fragment"><span class="">4XX - Fehler in der Anfrage/beim Client</span></li>
                        <li class="fragment"><span class="">5XX - Fehler am Server</span></li>
                    </ul>
                    <aside class="notes">
                        Die Status Codes ... <br>
                        ... geben Information über Erfolg oder Misserfolg eines Requests. <br>
                        ... werden durch eine Phrase ergänzt, die den Grund (bspw. für den Misserfolg) darstellt. <br>
                        ... und werden in Gruppen unterteilt. <br> <br>
                        KLICK <br>
                        Alle die mit einer 1 beginnen signalisieren, dass der Server noch etwas Zeit benötigt. <br> KLICK <br>
                        Die 2 am Anfang stellt einen Erfolg dar. Bekanntester Vertreter ist: 200 OK <br> KLICK <br>
                        Die 3 ist nicht kritisch, aber es läuft schon nicht alles nach Plan. Beschreibt Umleitung. Bsp: 301 Moved Permanently <br> KLICK <br>
                        Die 4 markiert einen Fehler beim der Client Applikation. Bsp: 404 Not Found - eine Resource wurde angefragt, die es nicht gibt. <br> KLICK <br>
                        Die 5 am Anfang signalisiert ein Fehler am Server. Bsp: 500 Internal Server Error <br>
                        Neben den Statuscodes konnten wir in dem Beispiel eine weitere Eigenschaft von HTTP erkennen: <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1>Method</h1>
                    <aside class="notes">
                        Die Methoden <br>
                        .. ergänzen einen Request um den Grund der Anfrage. <br>
                        Die bekantesten Sind GET und POST. <br>
                        Doch es gibt natürlich mehr... aber die sind ja böse, oder?<br>
                        Im Ernst, .. man spricht sogar wirklich von der ... <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1>Save method?</h1>
                    <aside class="notes">
                        Welche könnte das wohl sein?
                    </aside>
                </section>

                <section>
                    <h1>GET</h1>
                    <aside class="notes">
                        Genau!<br>
                        Aber nur richtig angewendet. <br>
                        GET fordert nur nur eine Resource an. Es ändert keine Resource, hat also keine Side-Effects auf dem Server.<br>
                        Soetwas ....<br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1>GET /blog/2/edit</h1>
                    <aside class="notes">
                        Geht mal garnicht ...<br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1><strike>GET /blog/2/edit</strike></h1>
                    <aside class="notes">
                        Also bitte gleich wieder vergessen. <br>
                        Dann lieber ... <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1>POST / PUT</h1>
                    <aside class="notes">
                        Aber welche? <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1>POST</h1>
                    <aside class="notes">
                        POST dient dem Anlegen einer neuen Resource.<br>
                        Im Grunde ergänzt es eine Liste an Resourcen um einen neuen Eintrag.<br>
                        Vor allem verwendet man POST wenn man sich nicht ganz sicher ist unter welcher URL der neue Eintrag anglegt werden soll.<br>
                        Denn meist ist die ID nicht bekannt, da der Server diese bspw. über ein auto-increment zuteilt. <br>
                        Natürlich muss ich im Body die Daten zu der neuen Resource mit senden. <br>
                        Hier wäre ein Beispiel ...<br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <pre>
                        <code>
POST /users HTTP/1.1
Host: www.example.dev
Content-Type: application/json

{
    "firstName": "Max",
    "lastName": "Berghoff"
}
                        </code>
                    </pre>
                    <p>POST request</p>
                    <aside class="notes">
                        Was wir hier tun ist ein POST request auf die Liste der User, weil wir die geanue ID nicht wissen - darum ja auch POST. <br>
                        Wir senden unser User Object im JSON Format im Body mit. <br>
                        Und erhalten vom Server ... <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <pre>
                        <code>
HTTP/1.1 201 Created
Content-Type: application/json;
Content-Location: /users/3

{
    "id": "3",
    "firstName": "Max",
    "lastName": "Berghoff"
}
                        </code>
                    </pre>
                    <p>POST response</p>
                    <aside class="notes">
                        ... Es scheint wohl geklappt zu haben. <br>
                        Der Server teilt uns zusaätzlich durch den Content-Location Header mit,
                        wo wir unseren neuen User jetzt finden können. <br>
                        Dazu erhalten wir das komplette Object noch einmal in zurück. <br>
                        Als Statuscode wird uns 201 Created gesendet. 2 vorne dran also alles OK. <br>
                        Dem steht gegenüber ...<br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1>PUT</h1>
                    <aside class="notes">
                        ... der PUT request. <br>
                        Diesen wendet man an, wenn die man eine Resource anlegen will und deren URL genau kennt. Ja .. also auch fürs Anlegen. <br>
                        Oder man Werte einer Resource verändern will. <br>
                        Auch hier muss man dann natürlich die URL der Resource genau wissen.<br>
                        So sähe ein Request dann aus ... <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <pre>
                        <code>
PUT /users/3 HTTP/1.1
Host: www.example.dev
Content-Type: application/json

{
    "firstName": "Max",
    "lastName": "Berghoff",
    "email": "Maximilian.Berghoff@mayflower.de"
}
                        </code>
                    </pre>
                    <p>PUT request</p>
                    <aside class="notes">
                        ... Ähnelt eigentlich dem des POST request - nur die Adresse ist genau.  <br>
                        Wir wollen also den User mit der ID = 3 ändern. Hier also um eine Email-Addresse ergänzen. <br>
                        Was antwortet der Server? ... <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <pre>
                        <code>
HTTP/1.1 200 OK
Content-Type: application/json;

{
    "id": "3",
    "firstName": "Max",
    "lastName": "Berghoff",
    "email": "Maximilian.Berghoff@mayflower.de"
}
                        </code>
                    </pre>
                    <p>POST response</p>
                    <aside class="notes">
                        ... in diesem Fall ein 200 OK, weil es nicht angelegt wurde. Dazu fehlt jetzt auch die Content-Location. <br>
                        Haben wir ja gekannt.<br>
                        Wie im POST request erhalten wir die Resource im aktuellen Zustand im Body. <br>
                        Es gibt noch einen dritten im Bunde ... <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1>PATCH</h1>
                    <aside class="notes">
                        ... soll ähnlich wie PUT Resourcen durch einen request verändern.<br>
                        Bei PATCH möchte man aber nur einzelene Werte ändern. D.h. man schickt auch nur diese an die URL der resource. <br>
                        Also ... <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1>POST / PUT / PATCH</h1>
                    <aside class="notes">
                         ... sind nun definitiv keine sicheren Methoden. Denn:  <br>
                        Sie verändern eine Resource oder legen eine neue an. D.h. sie verursachen Side Effects. <br>
                        Side Effects der besonderen Art liefert diese Methode ... <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1>DELETE</h1>
                    <aside class="notes">
                        ... Sie löscht diese gleich ganz. <br>
                        Natürlich muss die URL der resource dazu bekannt sein. Dann sähe ein Request so aus .. <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <pre>
                        <code data-trim>
DELETE /users/3 HTTP/1.1
Host: www.example.dev
                        </code>
                    </pre>
                    <p> DELETE request</p>
                    <aside class="notes">
                        Recht simpel. <br>
                        Server antwortet... <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <pre>
                        <code data-trim>
HTTP/1.1 204 No Content
Location: /users
                        </code>
                    </pre>
                    <p>DELETE response</p>
                    <aside class="notes">
                        ... das scheint wieder erfolgreich gewesen zu sein. Es steht zumindest eine 2 vorn dran am Statuscode. <br>
                        204 No Content <br>
                        Ja welchen Content soll man denn auch hier noch senden? Resource existiert nicht mehr. <br>
                        Für Client Anwendungen, die sich an HATEOAS halten kann oder sollte ein Location Header
                        angegeben werden, damit die Navigation nicht unterbrochen wird.  <br>
                        Es gibt noch zwei weitere, kleinere Methoden ... <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1>OPTIONS</h1>
                    <aside class="notes">
                        ... ist wie GET ebenfalls frei von Side-Effects. <br>
                        Es liefert der Client Applikation Informationen welche Methoden aktuell verfügbar sind. Diese
                        sind im sog. Allow Header aufgelistet. <br>
                        Was meine ich mit aktuell? Auch wenn der Zustand nicht interessieren sollten, wenn man HTTP genau nimmt,
                        kann der Login-Status für OPTIONS interessant sein. <br>
                        - Wenn ausgelogged, kann der Application meist nur eine Methode zur Verfügung stehen: GET <br />
                        - Wenn eingelogged: POST, PUT <br />
                        - Wenn spezielle Rolle: DELETE <br />
                        Und zum Schluss ... <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1>HEAD</h1>
                    <aside class="notes">
                        ... ist beinahe identisch zu GET, liefert aber muss aber keinen Body mit liefern. <br>
                        Die Response besteht also nur aus dem puren Header. <br>
                        Das kann für Applikationen von Nutzen sein. Will man bspw. nur abfragen ob sich eine Resource
                        verändert hat, so erfährt man dieses durch caching informationen in den headern. (Expire Date abgelaufe?) <br>
                        <br>
                        Sind bis hier her Fragen aufgetreten? <br>
                        Ansonsen ... <br>
                        ... Dann kommen wir zu diesem Herrn<br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1>Roy Fielding</h1>
                    <p class="fragment"><a href="http://tools.ietf.org/html/rfc2616">HTTP Spezification</a></p>
                    <aside class="notes">
                        ... Roy Fielding.<br>
                        KLICK<br>
                        Ist einer der Hauptautoren der HTTP Spezifikation. <br>
                        Seine Arbeit am HTTP Object Model mündete 2000 ein seiner ...<br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1>Disertation</h1>
                    <h4>
                        <a href="http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm">
                            Architectural Styles and
                            the Design of Network-based Software Architectures
                        </a>
                    </h4>
                    <p>DOCTOR OF PHILOSOPHY, 2000</p>
                    <aside class="notes">
                        ... Disertation zum Doctor der Philosophie ...!<br>
                        Und gibt es kein passenderes Thema für die Philosophie als: <br>
                        Architectural Styles and
                        the Design of Network-based Software Architectures <br>
                        Ein Teil dieser Arbeit behandelt RESTfull Applications. <br>
                        Zusammengefasst ... <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1>4 Constraints</h1>
                    <aside class="notes">
                        ... kann man es auf 4 Contraints herunter brechen. <br>
                        Die da wären ... <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1>1.<br />Adressierbarkeit</h1>
                    <aside class="notes">
                        ... die Adressierbareit. <br>
                        Jede Resource muss eindeutig im Netz erreichbar sein. <br>
                        D.h. unter einer URL dürfen sich nicht zwei Resourcen verbergen. <br>
                        Dazu kommen dann ...<br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1>2.<br />Repräsentationen</h1>
                    <aside class="notes">
                        ... die sog. Repräsentationen einer Resource. <br>
                        Unter Repräsentation versteht man jede mögliche Abwandlung. So kann die eine Abwandlung nur eine andere Sprache sein,
                        eine weitere könnte das Format, also der Content-Type sein, in der die Resource ausgeliefert wird. <br>
                        Eine Eigenschaft, die ich beim HTTP noch nicht genannt habe, aber für REST auch zutrifft ist ... <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1>3.<br />Zustandslosigkeit</h1>
                    <aside class="notes">
                        ... die Zustandslosigkeit. <br>
                        Der Service erhält vom Request immer alle Informationen, die er zum Bearbeiten des Requests benötigt. <br>
                        Der Service weiß nichts von vorhergehenden Requests der selbem Applikation. <br>
                        Das Widerspricht eigentlich unsere Denkweise von Sessions und Cookies, ist aber sowohl fester Bestandteilt von
                        REST als auch von HTTP.<br>
                        Das soll die Skalierbarkeit erhöhen, da die Lastverteilung durch einen LoadBalancer deutlich einfacher wird.
                        Er kann nach belieben, oder nach reinen Lastwerten, die Requests verteilen - muss sich also keine sorgen um den
                        Erhalt von Sessions machen.<br>
                        Die Client Applikation sollte den Zustand selbst halten. <br>
                        Und zu guter Letzt ... <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1>4.<br />Operationen</h1>
                    <aside class="notes">
                        ... die Operationen. <br>
                        Sie dienen dazu den sog. state transfer zu vollziehen. Denn jegliche Änderung am Zustand einer Resource
                        kann nur durch einen Request mit einer best. Operation durch geführt werden. <br />
                        So dann wollen wir mal noch ein paar Begriffe klären ... <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1>Resourcen?</h1>
                    <aside class="notes">
                        Ich rede zwar schon die ganze Zeit davon, aber was ist eigentlich eine Resource?<br>
                        Edelsteine? Metalle? Human Resources?<br>
                        Nein!<br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1>Jede Information kann Resource sein</h1>
                    <ul>
                        <li class="fragment">(HTML) Dokument</li>
                        <li class="fragment">Bild</li>
                        <li class="fragment">Liste von Resourcen</li>
                    </ul>
                    <p class="fragment">Alles was Ziel einer Referenz/eines Link sein kann.</p>
                    <aside class="notes">
                        Quasi, jede Information kann Resource sein. <br>
                        KLICK <br>
                        Ob ein HTML Dokument. <br>
                        KLICK <br>
                        oder ein Bild. <br>
                        KLICK <br>
                        oder eine Liste von anderen Resourcen. <br>
                        Diese kommt dann vor in... <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1>Repräsentationen</h1>
                    <aside class="notes">
                        ... Repräsentationen. <br>
                        Doch wie sehen Diese aus? <br>
                        Dazu nehmen uns mal einen vereinfachten User vor ...<br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <pre>
                        <code data-trim>
{
    "userId": "3",
    "username": "ElectricMaxxx",
    "firstName": "Max",
    "lastName": "Berghoff",
    "email": "Maximilian.Berghoff@mayflower.de"
}
                        </code>
                    </pre>
                    <p>User als JSON</p>
                    <aside class="notes">
                        Diese Form wird gerade von JavaScript Applikationen geschätzt. Es geht ums JSON. <br>
                        Die Resource ist der USER und diese Form bildet eine Repräsentation dessen. <br>
                        In XML würde das dann so aussehen ... <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <pre>
                        <code data-trim>
&lt;user&gt;
    &lt;userId&gt;3&lt;/userId&gt;
    &lt;userName&gt;ElectricMaxxx&lt;/userName&gt;
    &lt;firstName&gt;Maximilian&lt;/firstName&gt;
    &lt;lastName&gt;Berghoff&lt;/lastName&gt;
    &lt;email&gt;Maximilian.Berghoff@gmx.de&lt;/email&gt;
&lt;/user&gt;
                        </code>
                    </pre>
                    <p>User als XML</p>
                    <aside class="notes">
                        Es geht um die selbe Information - nur in einem anderen Format. <br>
                        Selbst das ist eine Repräsentation ... <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <pre>
                        <code data-trim>

&lt;ul&gt;
    &lt;li&gt;
        &lt;strong&gt;Username: &lt;/strong&gt; ElectricMaxxx
    &lt;/li&gt;
    &lt;li&gt;
        &lt;strong&gt;FirstName: &lt;/strong&gt; Max
    &lt;/li&gt;
    &lt;li&gt;
        &lt;strong&gt;LastName: &lt;/strong&gt; Berghoff
    &lt;/li&gt;
    &lt;li&gt;
        &lt;strong&gt;Email: &lt;/strong&gt; Maximilian.Berghoff@mayflower.de
    &lt;/li&gt;
&lt;/ul&gt;
                        </code>
                    </pre>
                    <p>User als HTML in einem Profil</p>
                    <aside class="notes">
                        Auch das ist eine .. <br>
                        Einfaches HTML. <br>
                        Der User erhält eine Darstellung bspw. in einem User-Profil <br>
                        Doch ... <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1>Wie erhalte ich die gewünschte Repräsentation?</h1>
                    <aside class="notes">
                        ... wir haben jetzt gesehen, dass es sie gibt, aber wie komme ich dann an die ran?<br />
                        Wichtig: Server muss sie natürlich bereit stellen können. <br />
                        Dann  wäre das eine Idee ... <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1>In der URL</h1>
                    <ul>
                        <li class="fragment"><code data-trim>/users/3.json</code></li>
                        <li class="fragment">Oder <code data-trim>/users/3.xml</code></li>
                        <li class="fragment">Oder <code data-trim>/users/3.html</code></li>
                    </ul>
                    <aside class="notes">
                        ... direkt in der URL. <br>
                        Jede Resource erhält einen Suffix, der das Format bestimmt. <br>
                        KLICK<br>
                        z.B. .json<br>
                        KLICK<br>
                        oder .xml <br>
                        KLICK<br>
                        oder gar .html<br>
                        Ein Vorteil liegt hier auf der Hand: <br>
                        Der Server kann direkt mit einem 404 Not Found antworten, wenn es eine Repräsentation nicht gibt.<br>
                        Es gibt einen zweiten Weg ... <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1>Im Header</h1>
                    <ul>
                        <li><code data-trim>GET /users/3</code></li>
                        <li class="fragment"><code data-trim>Content-Type: application/json</code></li>
                        <li class="fragment">Oder <code data-trim>Content-Type: application/xml</code></li>
                        <li class="fragment">Oder <code data-trim>Content-Type: text/html</code></li>
                    </ul>
                    <aside class="notes">
                        ... im Header. <br>
                        Wie?<br>
                        Über den Content-Type<br>
                        KLICK<br>
                        z.B. JSON<br>
                        KLICK<br>
                        oder XML <br>
                        KLICK<br>
                        oder gar HTML<br>
                        Die Angabe des Content-Type ist aber nicht bindend, der Server kann, wenn er nicht mag in seiner
                        präferierten Art und Weise antworten. D.h. der Client muss den Service kennen. <br>
                        Gibt es Fragen bis hier her? <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1>Wie soll Resource aussehen?</h1>
                    <aside class="notes">
                        Dann schauen wir uns einmal an, welche Informationen neben dem normalen Paylod an einer Resource hängen. <br>
                        Dem Client nutzen nämlich nicht nur der normale Payload, also im Beispiel waren das die User Daten, sondern auch noch
                        Meta-Informationen. Dazu gehören die Links zu anderen Resourcen. <br>
                        Das führt uns zu ... <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1>HATEOAS</h1>
                    <aside class="notes">
                        ... HATEOAS ... <br>
                        ist ein direktes Pattern, was aus den Arbeiten von Roy Fielding folgt ... <br>
                        Und bedeutet ... <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1>
                        <span>Hypermedia</span><br>
                        <span class="fragment">As</span> <span class="fragment">The</span> <span class="fragment">Engine</span> <span class="fragment">Of</span><br>
                        <span class="fragment">Application</span> <span class="fragment">State</span></h1>
                </section>

                <section>
                    <h1>WTF?</h1>
                    <aside class="notes">
                        ... WTF? <br>
                        Das WEB, so wie wir es kennen lebt von Links oder Verweisen. Ohne diese wäre es nicht zu dem Medium geworden, wie
                        wir es kennen. <br>
                        Jede normale Webseite enthält Links zu anderen Seiten. Google beurteilt nach Qualität und Quanität von Verweisen.<br />
                        Der Nutzer navigiert durchs Netzt über, ... Links <br />
                        Das bedeutet Links also Hyperlinks bilden den Motor für das Web und für deren Expansion. <br>
                        Das gilt dann auch für Resourcen, die ein Client von einem REST Service erhält. <br>
                        Im Idealfall erhält eine Client App schon in einem initialen Request all nötigen Links um durch alle anderen Resourcen navigieren zu können. <br>
                        Client Applikationen sollen quasi intelligent handeln und selbständig navigieren können. <br>
                        Wie würde das für XML aussehen ?<br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <pre>
                        <code data-trim>
&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;user&gt;
    &lt;userName&gt;ElectricMaxxx&lt;/userName&gt;
    &lt;firstName&gt;Maximilian&lt;/firstName&gt;
    &lt;lastName&gt;Berghoff&lt;/lastName&gt;
    &lt;email&gt;Maximilian.Berghoff@gmx.de&lt;/email&gt;
    &lt;link rel=&quot;groups&quot; href=&quot;/users/3/groups&quot; /&gt;
    &lt;link rel=&quot;roles&quot; href=&quot;/users/3/roles&quot; /&gt;
    &lt;link rel=&quot;orders&quot; href=&quot;/users/3/orders&quot; /&gt;
&lt;/user&gt;
                        </code>
                    </pre>
                    <aside class="notes">
                        Der Resource des Users wurden weitere Informationen hinzugefügt. <br>

                        Diese tragen die Verweise auf weitere Resourcen. Hier sind es direkte Eigenschften eins Users, die
                        in seperaten Resourcen hinterlegt sind: <br>
                        - Gruppen, Bestellungen und Rollen <br />
                        Die Ansicht der möglichen Links kann je nach Authorisation variieren. Mit zu wenigen Rechten versehen
                        kann einem Client der Verweis zu den Bestellungen erst gar nicht angezeigt werden. <br>
                        Aber was ist mit ... <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1>JSON ?</h1>
                    <p class="fragment"><a href="http://stateless.co/hal_specification.html">HAL Spezifikation</a></p>
                    <aside class="notes">
                        ... JSON?<br>
                        Das ist schwierig und wird auch kontrovers diskutiert.<br>
                        Denn im Grunde hält die JSON Spezifikation keine Möglichkeit bereit Links zu definieren. <br>
                        Da aber HATEOAS wie die constraints zu REST gehört, würde das jede Kommunikation mit JSON von REST
                        ausschließen. <br>
                        ... Aber ... <br>
                        KLICK <br>
                        Es gibt die sog. HAL Spezifikation, die diese Lücke schließt. <br>
                        Eine Resource wie eben in XML würde in JSON, dann so aussehen ... <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <pre>
                        <code data-trim>
"_links":{
    "self": { "href": "/users/3" }
},
"userId": "3",
"_embedded": {
    "orders": [{
        "_links": {
            "self": { "href": "users/3/orders/123"}
        }
    }],
    "groups": [{
        "_links": {
            "self": { "href": "users/3/orders/2"}
        }
    }]
}
                        </code>
                    </pre>
                    <aside class="notes">
                        Unter dem key _links können je nach authorisation und resource mehr Links sein.<br>
                        So kann man dort für Listen Links für die Paginierung bereithalten - also next/previos. <br>
                        Unter _embedded findet man hier list von ganzen Resourcen. Naja ganz stimmt nicht ganz. <br>
                        Hier sind es nur deren links auf die Resource selbst. Man könnte aber auch gut, die ganze Resource dar stellen.
                        Hängt immer vom Use Case ab. <br>
                        So nun ... <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1>Zurück auf Null</h1>
                    <aside class="notes">
                        ... Zurück auf Null. <br>
                        Wo sind wir gestarted? <br>
                        Wir haben ein Request <-> Repsonse Paar skiziert um HTTP zu erklären. <br>
                        So in der Art ... <br>
                        KLICK
                    </aside>
                </section>

                <section>
					<pre>
						<code data-trim>
GET /users/3 HTTP/1.1
Host: www.expamle.dev
Content-Type: application/xml
                        </code>
					</pre>
                    <p>Request auf User mit der ID 3</p>
                    <aside class="notes">
                        Ich habe jetzt nur mal die Resource auf unseren altebekannten User gewechselt und wünsche
                        mir jetzt die Antwort in der XML-REPRÄSENTATION. <br>
                        Dazu mache ich einen Request per GET OPERATION auf die EINDEUTIGE URL der Resource, also der URL des Users mit der ID = 3.<br>
                        Mit diese Information kann der Server wohl völlig ZUSTANDSLOS eine Antwort generieren ... <br>
                        KLICK
                    </aside>
                </section>

                <section>
					<pre>
						<code>
HTTP/1.1 200 OK
Content-Type: application/xml

&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;user&gt;
    &lt;userName&gt;ElectricMaxxx&lt;/userName&gt;
    &lt;firstName&gt;Maximilian&lt;/firstName&gt;
    &lt;lastName&gt;Berghoff&lt;/lastName&gt;
    &lt;email&gt;Maximilian.Berghoff@gmx.de&lt;/email&gt;
    &lt;link rel=&quot;groups&quot; href=&quot;/users/3/groups&quot; /&gt;
    &lt;link rel=&quot;roles&quot; href=&quot;/users/3/roles&quot; /&gt;
    &lt;link rel=&quot;orders&quot; href=&quot;/users/3/orders&quot; /&gt;
&lt;/user&gt;
                        </code>
					</pre>
                    <p>Anwort des Services in XML</p>
                    <aside class="notes">
                        ... Wie angefordert erhalte ich den User mit der ID = 3 in der XML REPRÄSENTATION
                        als Antwort auf meine GET OPERATION.
                    </aside>
                </section>

                <section>
                    <h1>Contraints erfüllt<br />
                        <span class="fragment">
                            -> REST = HTTP?
                        </span>
                    </h1>
                    <aside class="notes">
                        Mh. Nun eigentlich  sind doch alle Constraints für REST erfüllt. <br>
                        Ich habe nur die Regeln von HTTP angewandt. <br>
                        Ist also ... <br>
                        KLICK<br>
                        Die Antwort ist ... <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1>NEIN!!!</h1>
                    <aside class="notes">
                        Ja, genau. <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1>HypeText Transfer Protocol</h1>
                    <aside class="notes">
                        HTTP ist ein Protokol, was den Transfer von Files regelt. <br>
                        Neben ihm existierne noch andere wie FTP oder SMTP. <br>
                        Und ... <br>
                        KLICK
                    </aside>
                </section>

                <section>
                    <h1>REpresentational State Transfer</h1>
                    <aside class="notes">
                        REST beschreibt eigentlich nur eine Sammlung von Constraints oder Patterns. <br>
                        Es soll Skalierbarkeit und Fehler-Resistenz von Systemen erhöhen <br />
                        Natürlich ist das Web mit HTTP ein solches System - wohl auch das größte. <br>
                        Aber es gäbe wie gesagt noch weitere Protokolle.<br>
                        Doch REST und HTTTP harmonisieren einfach mit einander. <br>
                        Es gibt weniges was einem zu sauberen HTTP auffordert, wie REST.<br>
                        Dazu gibt es in vielen Programmiersprachen Libraries für die REST Kommunikation über HTTP.<br>
                        Darum ... <br>
                    </aside>
                </section>

                <section>
                    <h6>I love</h6>
                    <h1>RESTing on HTTP</h1>
                </section>

                <section>
                    <h1>Questions ?</h1>
                    <ul>
                        <li>Ask now!</li>
                        <li class="fragment">Twitter:  &nbsp; @ElectricMaxxx</li>
                        <li class="fragment">Mail: &nbsp; Maximilian.Berghoff@mayflower.de</li>
                    </ul>
                </section>

                <section>
                    <h1>Thank you!</h1>
                </section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
<
<
